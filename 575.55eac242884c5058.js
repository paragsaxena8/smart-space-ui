"use strict";(self.webpackChunksmart_space_ui=self.webpackChunksmart_space_ui||[]).push([[575],{3575:(R,f,i)=>{i.r(f),i.d(f,{AdminModule:()=>L});var d=i(6895),g=i(9299),r=i(4006),p=i(3262),h=i(4004),t=i(4650),v=i(5925),b=i(263),C=i(7009),T=i(3238),y=i(4859),s=i(3546),u=i(9549),Z=i(284),x=i(4385),A=i(266);const I=["UploadFileInput"];function N(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Blog Name is required "),t.qZA())}function q(e,a){if(1&e&&(t.TgZ(0,"mat-option",17)(1,"span",18),t._uU(2),t.qZA()()),2&e){const o=a.$implicit;t.Q6J("value",o._id),t.xp6(1),t.Q6J("matTooltip",o.description),t.xp6(1),t.Oqu(o.name)}}function _(e,a){if(1&e&&(t.TgZ(0,"mat-option",17),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.Q6J("value",o._id),t.xp6(1),t.hij(" ",o.name," ")}}let U=(()=>{class e{constructor(o,n,l,m){this.ds=o,this._auth=n,this._snackBar=l,this.router=m,this.editor=new p.ML,this.html="",this.myfilename="",this.tagList=this.ds.getData("tags").pipe((0,h.U)(c=>(console.log(c.data),c.data))),this.categories=this.ds.getData("categories").pipe((0,h.U)(c=>(console.log(c.data),c.data))),this.imageUploadError=!1,this.editor.commands.backgroundColor("black").textColor("red").insertText("Hello world!").focus().scrollIntoView().exec()}ngOnDestroy(){this.editor.destroy()}ngOnInit(){this.form=new r.nJ({title:new r.p4("",[r.kI.required]),content:new r.p4(null,[r.kI.required]),image:new r.p4("",[r.kI.required]),category:new r.p4("",[r.kI.required]),tags:new r.p4("",[r.kI.required])})}get title(){return this.form.get("title")}get content(){return this.form.get("content")}get category(){return this.form.get("category")}get tags(){return this.form.get("tags")}get image(){return this.form.get("image")}fileChangeEvent(o){if(o.target.files.length>0){const n=o.target.files[0];if(n&&["image/png","image/jpeg","image/jpg"].includes(n.type)){this.myfilename=`featured-image.${n.type.split("/")[1]}`,this.form.patchValue({image:n}),this.imageUploadError=!1;const m=new FileReader;m.onload=()=>{this.imageData=m.result},m.onerror=()=>{this.imageUploadError="Unable to read file"},m.readAsDataURL(n)}else this.imageUploadError="Only png, jpeg and jpg files are allowed"}}onSubmit(o){if(o.valid){const n=(0,p.io)(o.value.content);console.log("Blog is ready to be posted");const l=new FormData;l.append("title",o.value.title),l.append("image",o.value.image,o.value.title.replace(/\s/g,"")),l.append("body",n),l.append("author",this._auth.currentUserValue.data.user._id),l.append("category",o.value.category),l.append("tags",o.value.tags),this.ds.postData("blogs",l).subscribe(m=>{console.log(m),this._snackBar.open("Blog posted successfully"),this.router.navigate(["/blogs"])}),this.form.reset(),this.imageData=null}}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(v.D),t.Y36(b.e),t.Y36(C.ux),t.Y36(g.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-blog-action"]],viewQuery:function(o,n){if(1&o&&t.Gf(I,5),2&o){let l;t.iGM(l=t.CRH())&&(n.uploadFileInput=l.first)}},decls:30,vars:12,consts:[["id","createBlog",1,"wrapper"],[1,"box","bg-accent","full-box","admin-layout"],[1,"d-flex","jcb","admin-layout-header"],[1,"accent","admin-layout-title"],[1,"content","admin-layout-body"],[1,"form",3,"formGroup","ngSubmit"],[1,"full-width"],["matInput","","type","text","name","title","formControlName","title","placeholder","Enter Blog Name","required","true"],[4,"ngIf"],[1,"editor","my-1","NgxEditor__Wrapper"],[3,"editor"],["formControlName","content","required","","name","content",3,"editor","placeholder"],[1,"otherAttr"],["formControlName","category"],[3,"value",4,"ngFor","ngForOf"],["formControlName","tags","multiple",""],["type","submit","mat-raised-button","","color","primary",1,"btn-sm","my-1",3,"disabled"],[3,"value"],[3,"matTooltip"]],template:function(o,n){1&o&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"h2",3),t._uU(4,"Create Blog"),t.qZA()(),t.TgZ(5,"div",4)(6,"form",5),t.NdJ("ngSubmit",function(){return n.onSubmit(n.form)}),t.TgZ(7,"mat-card")(8,"mat-card-content")(9,"mat-form-field",6),t._UZ(10,"input",7),t.YNc(11,N,2,0,"mat-error",8),t.qZA(),t.TgZ(12,"div",9),t._UZ(13,"ngx-editor-menu",10)(14,"ngx-editor",11),t.qZA(),t.TgZ(15,"div",12)(16,"mat-form-field",6)(17,"mat-label"),t._uU(18,"Category"),t.qZA(),t.TgZ(19,"mat-select",13),t.YNc(20,q,3,3,"mat-option",14),t.ALo(21,"async"),t.qZA()(),t.TgZ(22,"mat-form-field",6)(23,"mat-label"),t._uU(24,"Tags"),t.qZA(),t.TgZ(25,"mat-select",15),t.YNc(26,_,2,2,"mat-option",14),t.ALo(27,"async"),t.qZA()()(),t.TgZ(28,"button",16),t._uU(29," Create Blog "),t.qZA()()()()()()()),2&o&&(t.xp6(6),t.Q6J("formGroup",n.form),t.xp6(5),t.Q6J("ngIf",n.title.hasError("required")),t.xp6(2),t.Q6J("editor",n.editor),t.xp6(1),t.Q6J("editor",n.editor)("placeholder","Blog Content here..."),t.xp6(6),t.Q6J("ngForOf",t.lcZ(21,8,n.categories)),t.xp6(6),t.Q6J("ngForOf",t.lcZ(27,10,n.tagList)),t.xp6(2),t.Q6J("disabled",n.form.invalid))},dependencies:[d.sg,d.O5,T.ey,y.lW,s.a8,s.dn,u.TO,u.KE,u.hX,Z.Nt,x.gD,A.gM,r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.sg,r.u,p.tP,p.Mn,d.Ov],styles:[".NgxEditor__MenuBar{flex-wrap:wrap}  .NgxEditor{border-top-left-radius:0;border-top-right-radius:0;border:none;height:400px!important;overflow-y:auto}ngx-editor[_ngcontent-%COMP%] > .NgxEditor[_ngcontent-%COMP%]{background:#000!important;color:#fff!important}.mat-toolbar-single-row[_ngcontent-%COMP%]{height:auto!important;background:transparent}.mat-toolbar-single-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:30%}#fileUpload[_ngcontent-%COMP%]{position:absolute;z-index:9;opacity:0;height:100%;width:100%;left:0;top:0;cursor:pointer}.showImage[_ngcontent-%COMP%]{text-decoration:none;position:relative}.showImage[_ngcontent-%COMP%]   div.tooltip[_ngcontent-%COMP%]{display:none;border-radius:6px;color:#000;background:white}.showImage[_ngcontent-%COMP%]   div.tooltip[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{float:left;margin:0 8px 8px 0}.showImage[_ngcontent-%COMP%]:hover   .tooltip[_ngcontent-%COMP%]{display:block;position:absolute;top:.5rem;left:min(4vw,-14rem);z-index:1000;width:auto;max-width:25rem;max-height:25rem;border:1px solid black;margin-top:12px;margin-left:32px;overflow:auto;padding:8px}.showImage[_ngcontent-%COMP%]   .tooltip[_ngcontent-%COMP%]:hover{display:block}.medium[_ngcontent-%COMP%]{font-size:medium!important}"]}),e})();var P=i(4516);let J=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-dashboard"]],decls:7,vars:1,consts:[["id","blogs"],[1,"box","bg-accent","full-box","admin-layout"],[1,"d-flex","jcb","admin-layout-header"],[1,"accent","admin-layout-title"],[1,"content","admin-layout-body"],[3,"location"]],template:function(o,n){1&o&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"h2",3),t._uU(4,"My Blogs"),t.qZA()(),t.TgZ(5,"div",4),t._UZ(6,"app-blog",5),t.qZA()()()),2&o&&(t.xp6(6),t.Q6J("location","dashboard"))},dependencies:[P.O]}),e})();var M=i(7392),O=i(9349);function w(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," userName is required "),t.qZA())}function B(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Name is required "),t.qZA())}function D(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Email is required "),t.qZA())}function E(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Not a valid email "),t.qZA())}function Q(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Role is required "),t.qZA())}function k(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Bio is required "),t.qZA())}function F(e,a){if(1&e&&(t.TgZ(0,"button",16),t._uU(1," Edit Profile "),t.qZA()),2&e){const o=t.oxw();t.Q6J("disabled",o.form.invalid)}}const Y=[{path:"",children:[{path:"",data:{title:"Dashboard"},component:J},{path:"create",data:{title:"Create Blog"},component:U},{path:"profile",data:{title:"Profile"},component:(()=>{class e{constructor(o){this._auth=o,this.editEnabled=!1,this.form=new r.nJ({userName:new r.p4("",[r.kI.required,r.kI.minLength(3)]),name:new r.p4("",[r.kI.required]),email:new r.p4("",[r.kI.required,r.kI.email]),role:new r.p4("",[r.kI.required]),bio:new r.p4("",[r.kI.required]),active:new r.p4("",[r.kI.required]),photo:new r.p4("",[r.kI.required])})}ngOnInit(){this.profileData=this._auth.currentUserValue.data.user,console.log(this.profileData),this.form.setValue({userName:this.profileData.username,name:this.profileData.name,email:this.profileData.email,role:this.profileData.role,bio:this.profileData.bio,active:this.profileData.active,photo:this.profileData.photo}),this.form.disable()}enableEdit(){this.form.controls.name.enable(),this.form.controls.bio.enable(),this.editEnabled=!0}get userName(){return this.form.controls.userName}get name(){return this.form.controls.name}get email(){return this.form.controls.email}get role(){return this.form.controls.role}get bio(){return this.form.controls.bio}get active(){return this.form.controls.active}get photo(){return this.form.controls.photo}uploadImage(){}onSubmit(){console.log(this.form.value)}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(b.e))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-profile"]],decls:32,vars:10,consts:[["id","blogs",1,"wrapper"],[1,"box","bg-accent","full-box","admin-layout"],[1,"d-flex","jcb","mb-2"],[1,"accent","admin-layout-title"],["type","button","mat-mini-fab","",3,"click"],[1,"content","admin-layout-body"],[1,"form",3,"formGroup","ngSubmit"],["mat-card-avatar","",1,"avatar-img",3,"src","alt","click"],[1,"full-width"],["matInput","","type","text","name","userName","formControlName","userName","placeholder","User Name","required","true"],[4,"ngIf"],["matInput","","type","text","name","name","formControlName","name","placeholder","Name","required","true"],["matInput","","type","text","name","email","formControlName","email","placeholder","Email","required","true"],["matInput","","type","text","name","role","formControlName","role","placeholder","Role","required","true"],["matInput","","cdkTextareaAutosize","","name","bio","formControlName","bio","placeholder","Bio","required","true"],["type","submit","mat-raised-button","","color","primary","class","btn-sm my-1",3,"disabled",4,"ngIf"],["type","submit","mat-raised-button","","color","primary",1,"btn-sm","my-1",3,"disabled"]],template:function(o,n){1&o&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"h2",3),t._uU(4,"My Profile"),t.qZA(),t.TgZ(5,"button",4),t.NdJ("click",function(){return n.enableEdit()}),t.TgZ(6,"mat-icon"),t._uU(7,"create"),t.qZA()()(),t.TgZ(8,"div",5)(9,"form",6),t.NdJ("ngSubmit",function(){return n.onSubmit()}),t.TgZ(10,"mat-card")(11,"mat-card-header")(12,"mat-card-title")(13,"img",7),t.NdJ("click",function(){return n.uploadImage()}),t.qZA()()(),t.TgZ(14,"mat-card-content")(15,"mat-form-field",8),t._UZ(16,"input",9),t.YNc(17,w,2,0,"mat-error",10),t.qZA(),t.TgZ(18,"mat-form-field",8),t._UZ(19,"input",11),t.YNc(20,B,2,0,"mat-error",10),t.qZA(),t.TgZ(21,"mat-form-field",8),t._UZ(22,"input",12),t.YNc(23,D,2,0,"mat-error",10),t.YNc(24,E,2,0,"mat-error",10),t.qZA(),t.TgZ(25,"mat-form-field",8),t._UZ(26,"input",13),t.YNc(27,Q,2,0,"mat-error",10),t.qZA(),t.TgZ(28,"mat-form-field",8),t._UZ(29,"textarea",14),t.YNc(30,k,2,0,"mat-error",10),t.qZA(),t.YNc(31,F,2,1,"button",15),t.qZA()()()()()()),2&o&&(t.xp6(9),t.Q6J("formGroup",n.form),t.xp6(4),t.s9C("alt",n.profileData.name),t.Q6J("src",n.profileData.photo,t.LSH),t.xp6(4),t.Q6J("ngIf",n.userName.hasError("required")),t.xp6(3),t.Q6J("ngIf",n.name.hasError("required")),t.xp6(3),t.Q6J("ngIf",n.email.hasError("required")),t.xp6(1),t.Q6J("ngIf",n.email.hasError("email")),t.xp6(3),t.Q6J("ngIf",n.role.hasError("required")),t.xp6(3),t.Q6J("ngIf",n.bio.hasError("required")),t.xp6(1),t.Q6J("ngIf",n.editEnabled))},dependencies:[d.O5,y.lW,s.a8,s.dk,s.dn,s.n5,s.kc,M.Hw,O.IC,u.TO,u.KE,Z.Nt,r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.sg,r.u]}),e})()}]}];let S=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[g.Bz.forChild(Y),g.Bz]}),e})();var j=i(1562);let L=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[d.ez,S,j.m,p.FP]}),e})()}}]);