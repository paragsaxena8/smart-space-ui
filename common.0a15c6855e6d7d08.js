"use strict";(self.webpackChunksmart_space_ui=self.webpackChunksmart_space_ui||[]).push([[592],{4516:(J,T,o)=>{o.d(T,{O:()=>B});var p=o(5113),b=o(7579),y=o(6063);class C extends b.x{constructor(n=1/0,e=1/0,i=y.l){super(),this._bufferSize=n,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,n),this._windowTime=Math.max(1,e)}next(n){const{isStopped:e,_buffer:i,_infiniteTimeWindow:a,_timestampProvider:r,_windowTime:l}=this;e||(i.push(n),!a&&i.push(r.now()+l)),this._trimBuffer(),super.next(n)}_subscribe(n){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(n),{_infiniteTimeWindow:i,_buffer:a}=this,r=a.slice();for(let l=0;l<r.length&&!n.closed;l+=i?1:2)n.next(r[l]);return this._checkFinalizedStatuses(n),e}_trimBuffer(){const{_bufferSize:n,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:a}=this,r=(a?1:2)*n;if(n<1/0&&r<i.length&&i.splice(0,i.length-r),!a){const l=e.now();let m=0;for(let d=1;d<i.length&&i[d]<=l;d+=2)m=d;m&&i.splice(0,m+1)}}}var _=o(3099);function h(s,n,e){var i,a;let r,l=!1;return s&&"object"==typeof s?(r=null!==(i=s.bufferSize)&&void 0!==i?i:1/0,n=null!==(a=s.windowTime)&&void 0!==a?a:1/0,l=!!s.refCount,e=s.scheduler):r=null!=s?s:1/0,(0,_.B)({connector:()=>new C(r,n,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:l})}var u=o(4004),f=o(262),v=o(2843),t=o(5e3),Z=o(5925),I=o(1083),U=o(263),w=o(2313),g=o(9808),x=o(3954),c=o(9224);function H(s,n){if(1&s&&(t.TgZ(0,"mat-card-subtitle"),t._uU(1),t.qZA()),2&s){const e=t.oxw().$implicit;t.xp6(1),t.AsE("By ",e.author.username," | ",e.readingTime," min Read ")}}function S(s,n){if(1&s){const e=t.EpF();t.TgZ(0,"mat-grid-tile"),t.TgZ(1,"mat-card",3),t.TgZ(2,"mat-card-header"),t._UZ(3,"img",4),t.TgZ(4,"mat-card-title",5),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(2).openPost(r)}),t.qZA(),t.YNc(5,H,2,2,"mat-card-subtitle",6),t.qZA(),t.TgZ(6,"div",7),t._UZ(7,"img",8),t.qZA(),t.TgZ(8,"mat-card-content"),t._UZ(9,"div",9),t.qZA(),t.qZA(),t.qZA()}if(2&s){const e=n.$implicit,i=t.oxw(2);t.xp6(3),t.Q6J("src",e.author.photo,t.LSH),t.xp6(1),t.Q6J("innerText",i.toTitleCase(e.title)),t.xp6(1),t.Q6J("ngIf","dashboard"!==i.location),t.xp6(2),t.s9C("src",e.featuredImage,t.LSH),t.s9C("alt",e.title),t.xp6(2),t.Q6J("innerHTML",i.htmlToPlaintext(e.summary),t.oJD)}}function A(s,n){if(1&s&&(t.TgZ(0,"mat-grid-list",1),t.YNc(1,S,10,6,"mat-grid-tile",2),t.qZA()),2&s){const e=n.ngIf,i=t.oxw();t.Q6J("cols",i.mybreakpoint),t.xp6(1),t.Q6J("ngForOf",e)}}let B=(()=>{class s{constructor(e,i,a,r,l){this.ds=e,this.breakpointObserver=i,this.router=a,this._auth=r,this.domSanitizer=l,this.currentUser=null,this.mybreakpoint=3,this.isHandset$=this.breakpointObserver.observe(p.u3.Handset).pipe((0,u.U)(m=>m.matches),h())}ngOnInit(){this.currentUser=Object.keys(this._auth.currentUserValue).length>0?this._auth.currentUserValue.data.user:null,console.log(this.location),this.allBlogs$=this.currentUser&&"home"!==this.location?this.ds.getDataWithParams("blogs",{name:"user",value:this.currentUser._id}).pipe((0,u.U)(e=>e.data),h(),(0,f.K)(e=>(0,v._)(()=>new Error(e)))):this.ds.getData("blogs").pipe((0,u.U)(e=>e.data),h(),(0,f.K)(e=>(0,v._)(()=>new Error(e)))),this.isHandset$.subscribe(e=>{this.mybreakpoint=e?1:4})}openPost(e){const i=e.slug;console.log("/post",i),this.router.navigate(["/blog/post",i])}toTitleCase(e){return e.replace(/\w\S*/g,i=>i.charAt(0).toUpperCase()+i.substr(1).toLowerCase())}htmlToPlaintext(e){return this.domSanitizer.bypassSecurityTrustHtml(e).toString(),e?String(e).replace(/<[^>]+>/gm,""):""}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(Z.D),t.Y36(p.Yg),t.Y36(I.F0),t.Y36(U.e),t.Y36(w.H7))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-blog"]],inputs:{location:"location"},decls:2,vars:3,consts:[["rowHeight","400px","gutterSize","10px",3,"cols",4,"ngIf"],["rowHeight","400px","gutterSize","10px",3,"cols"],[4,"ngFor","ngForOf"],[1,"blog-card"],["mat-card-avatar","","alt","author picture",1,"header-min-logo",3,"src"],[1,"cp",3,"innerText","click"],[4,"ngIf"],[1,"card-img"],["mat-card-image","",1,"ofc",3,"src","alt"],[1,"blog-summary",3,"innerHTML"]],template:function(e,i){1&e&&(t.YNc(0,A,2,2,"mat-grid-list",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,i.allBlogs$))},directives:[g.O5,x.Il,g.sg,x.DX,c.a8,c.dk,c.kc,c.n5,c.$j,c.G2,c.dn],pipes:[g.Ov],styles:[""]}),s})()}}]);