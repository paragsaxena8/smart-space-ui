"use strict";(self.webpackChunksmart_space_ui=self.webpackChunksmart_space_ui||[]).push([[592],{4516:(P,b,o)=>{o.d(b,{O:()=>E});var g=o(2289),d=o(4004),T=o(7579),y=o(6063);class x extends T.x{constructor(s=1/0,n=1/0,e=y.l){super(),this._bufferSize=s,this._windowTime=n,this._timestampProvider=e,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,s),this._windowTime=Math.max(1,n)}next(s){const{isStopped:n,_buffer:e,_infiniteTimeWindow:l,_timestampProvider:r,_windowTime:a}=this;n||(e.push(s),!l&&e.push(r.now()+a)),this._trimBuffer(),super.next(s)}_subscribe(s){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(s),{_infiniteTimeWindow:e,_buffer:l}=this,r=l.slice();for(let a=0;a<r.length&&!s.closed;a+=e?1:2)s.next(r[a]);return this._checkFinalizedStatuses(s),n}_trimBuffer(){const{_bufferSize:s,_timestampProvider:n,_buffer:e,_infiniteTimeWindow:l}=this,r=(l?1:2)*s;if(s<1/0&&r<e.length&&e.splice(0,e.length-r),!l){const a=n.now();let m=0;for(let u=1;u<e.length&&e[u]<=a;u+=2)m=u;m&&e.splice(0,m+1)}}}var C=o(3099);function h(i,s,n){var e,l;let r,a=!1;return i&&"object"==typeof i?(r=null!==(e=i.bufferSize)&&void 0!==e?e:1/0,s=null!==(l=i.windowTime)&&void 0!==l?l:1/0,a=!!i.refCount,n=i.scheduler):r=i??1/0,(0,C.B)({connector:()=>new x(r,s,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:a})}var f=o(262),v=o(2843),t=o(4650),Z=o(5925),I=o(9299),U=o(263),A=o(1481),w=o(4859),c=o(3546),p=o(6895);function H(i,s){if(1&i&&(t.TgZ(0,"mat-card-subtitle"),t._uU(1),t.qZA()),2&i){const n=t.oxw().$implicit;t.xp6(1),t.AsE("By ",n.author.username," | ",n.readingTime," min Read ")}}function S(i,s){if(1&i){const n=t.EpF();t.TgZ(0,"div")(1,"mat-card")(2,"mat-card-header"),t._UZ(3,"img",3),t.TgZ(4,"mat-card-title",4),t.NdJ("click",function(){const r=t.CHM(n).$implicit,a=t.oxw(2);return t.KtG(a.openPost(r))}),t.qZA(),t.YNc(5,H,2,2,"mat-card-subtitle",5),t.qZA(),t.TgZ(6,"mat-card-content"),t._UZ(7,"div",6),t.qZA(),t.TgZ(8,"mat-card-actions")(9,"button",7),t._uU(10,"LIKE"),t.qZA(),t.TgZ(11,"button",7),t._uU(12,"SHARE"),t.qZA()()()()}if(2&i){const n=s.$implicit,e=t.oxw(2);t.xp6(3),t.Q6J("src",n.author.photo,t.LSH),t.xp6(1),t.Q6J("innerText",e.toTitleCase(n.title)),t.xp6(1),t.Q6J("ngIf","dashboard"!==e.location),t.xp6(2),t.Q6J("innerHTML",e.htmlToPlaintext(n.summary),t.oJD)}}function B(i,s){if(1&i&&(t.TgZ(0,"div",1),t.YNc(1,S,13,4,"div",2),t.qZA()),2&i){const n=s.ngIf;t.xp6(1),t.Q6J("ngForOf",n)}}let E=(()=>{class i{constructor(n,e,l,r,a){this.ds=n,this.breakpointObserver=e,this.router=l,this._auth=r,this.domSanitizer=a,this.currentUser=null,this.mybreakpoint=3,this.isHandset$=this.breakpointObserver.observe(g.u3.Handset).pipe((0,d.U)(m=>m.matches),h())}ngOnInit(){this.currentUser=Object.keys(this._auth.currentUserValue).length>0?this._auth.currentUserValue.data.user:null,console.log(this.location),this.allBlogs$=this.currentUser&&"home"!==this.location?this.ds.getDataWithParams("blogs",{name:"user",value:this.currentUser._id}).pipe((0,d.U)(n=>n.data),h(),(0,f.K)(n=>(0,v._)(()=>new Error(n)))):this.ds.getData("blogs").pipe((0,d.U)(n=>n.data),h(),(0,f.K)(n=>(0,v._)(()=>new Error(n)))),this.isHandset$.subscribe(n=>{this.mybreakpoint=n?1:4})}openPost(n){const e=n.slug;console.log("/post",e),this.router.navigate(["/blog/post",e])}toTitleCase(n){return n.replace(/\w\S*/g,e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase())}htmlToPlaintext(n){return this.domSanitizer.bypassSecurityTrustHtml(n).toString(),n?String(n).replace(/<[^>]+>/gm,""):""}}return i.\u0275fac=function(n){return new(n||i)(t.Y36(Z.D),t.Y36(g.Yg),t.Y36(I.F0),t.Y36(U.e),t.Y36(A.H7))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-blog"]],inputs:{location:"location"},decls:2,vars:3,consts:[["class","grid-container",4,"ngIf"],[1,"grid-container"],[4,"ngFor","ngForOf"],["mat-card-avatar","","alt","author picture",1,"header-min-logo",3,"src"],[1,"cp",3,"innerText","click"],[4,"ngIf"],[1,"blog-summary",3,"innerHTML"],["mat-button",""]],template:function(n,e){1&n&&(t.YNc(0,B,2,1,"div",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,e.allBlogs$))},dependencies:[w.lW,c.a8,c.dk,c.dn,c.n5,c.$j,c.hq,c.kc,p.sg,p.O5,p.Ov]}),i})()}}]);