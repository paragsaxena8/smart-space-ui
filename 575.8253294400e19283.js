"use strict";(self.webpackChunksmart_space_ui=self.webpackChunksmart_space_ui||[]).push([[575],{3575:(H,f,i)=>{i.r(f),i.d(f,{AdminModule:()=>G});var g=i(9808),c=i(1083),r=i(3075),p=i(3550),h=i(4004),t=i(5e3),y=i(5925),Z=i(263),v=i(7261),d=i(9224),u=i(7322),A=i(8833),T=i(3954),b=i(7423),C=i(4107),q=i(508),_=i(7238);const I=["UploadFileInput"];function x(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Blog Name is required "),t.qZA())}function N(e,a){if(1&e&&t._UZ(0,"img",26),2&e){const o=t.oxw();t.Q6J("src",o.imageData,t.LSH)("alt",o.form.value.title)}}function U(e,a){if(1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.hij(" ",o.imageUploadError," ")}}function J(e,a){if(1&e&&(t.TgZ(0,"mat-option",27),t.TgZ(1,"span",28),t._uU(2),t.qZA(),t.qZA()),2&e){const o=a.$implicit;t.Q6J("value",o._id),t.xp6(1),t.Q6J("matTooltip",o.description),t.xp6(1),t.Oqu(o.name)}}function w(e,a){if(1&e&&(t.TgZ(0,"mat-option",27),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.Q6J("value",o._id),t.xp6(1),t.hij(" ",o.name," ")}}let P=(()=>{class e{constructor(o,n,l,m){this.ds=o,this._auth=n,this._snackBar=l,this.router=m,this.editor=new p.ML,this.html="",this.myfilename="",this.tagList=this.ds.getData("tags").pipe((0,h.U)(s=>(console.log(s.data),s.data))),this.categories=this.ds.getData("categories").pipe((0,h.U)(s=>(console.log(s.data),s.data))),this.imageUploadError=!1}ngOnDestroy(){this.editor.destroy()}ngOnInit(){this.form=new r.cw({title:new r.NI("",[r.kI.required]),content:new r.NI(null,[r.kI.required]),image:new r.NI("",[r.kI.required]),category:new r.NI("",[r.kI.required]),tags:new r.NI("",[r.kI.required])})}get title(){return this.form.get("title")}get content(){return this.form.get("content")}get category(){return this.form.get("category")}get tags(){return this.form.get("tags")}get image(){return this.form.get("image")}fileChangeEvent(o){if(o.target.files.length>0){const n=o.target.files[0];if(n&&["image/png","image/jpeg","image/jpg"].includes(n.type)){this.myfilename=`featured-image.${n.type.split("/")[1]}`,this.form.patchValue({image:n}),this.imageUploadError=!1;const m=new FileReader;m.onload=()=>{this.imageData=m.result},m.onerror=()=>{this.imageUploadError="Unable to read file"},m.readAsDataURL(n)}else this.imageUploadError="Only png, jpeg and jpg files are allowed"}}onSubmit(o){if(o.valid){const n=(0,p.io)(o.value.content);console.log("Blog is ready to be posted");const l=new FormData;l.append("title",o.value.title),l.append("image",o.value.image,o.value.title.replace(/\s/g,"")),l.append("body",n),l.append("author",this._auth.currentUserValue.data.user._id),l.append("category",o.value.category),l.append("tags",o.value.tags),this.ds.postData("blogs",l).subscribe(m=>{console.log(m),this._snackBar.open("Blog posted successfully"),this.router.navigate(["/blogs"])}),this.form.reset(),this.imageData=null}}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(y.D),t.Y36(Z.e),t.Y36(v.ux),t.Y36(c.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-blog-action"]],viewQuery:function(o,n){if(1&o&&t.Gf(I,5),2&o){let l;t.iGM(l=t.CRH())&&(n.uploadFileInput=l.first)}},decls:42,vars:18,consts:[["id","createBlog",1,"wrapper"],[1,"box","bg-accent","full-box","admin-layout"],[1,"d-flex","jcb","admin-layout-header"],[1,"accent","admin-layout-title"],[1,"content","admin-layout-body"],[1,"form",3,"formGroup","ngSubmit"],[1,"full-width"],["matInput","","type","text","name","title","formControlName","title","placeholder","Enter Blog Name","required","true"],[4,"ngIf"],[1,"editor","my-1"],[3,"editor"],["formControlName","content","required","","name","content",3,"editor","placeholder"],["gutterSize","10px","rowHeight","250px",3,"cols"],["colspan","1",1,"dropzone__outline"],[1,"medium","dropzone__upload"],["width","auto","height","200px",3,"src","alt",4,"ngIf"],[1,"text-center",3,"click"],["type","button","mat-raised-button","","color","primary",3,"click"],["type","file","accept","image/*","single","",3,"change"],["uploadFile",""],["colspan","1"],[1,"otherAttr"],["formControlName","category"],[3,"value",4,"ngFor","ngForOf"],["formControlName","tags","multiple",""],["type","submit","mat-raised-button","","color","primary",1,"btn-sm","my-1",3,"disabled"],["width","auto","height","200px",3,"src","alt"],[3,"value"],[3,"matTooltip"]],template:function(o,n){if(1&o){const l=t.EpF();t.TgZ(0,"section",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h2",3),t._uU(4,"Create Blog"),t.qZA(),t.qZA(),t.TgZ(5,"div",4),t.TgZ(6,"form",5),t.NdJ("ngSubmit",function(){return n.onSubmit(n.form)}),t.TgZ(7,"mat-card"),t.TgZ(8,"mat-card-content"),t.TgZ(9,"mat-form-field",6),t._UZ(10,"input",7),t.YNc(11,x,2,0,"mat-error",8),t.qZA(),t.TgZ(12,"div",9),t._UZ(13,"ngx-editor-floating-menu",10),t._UZ(14,"ngx-editor",11),t.qZA(),t.TgZ(15,"mat-grid-list",12),t.TgZ(16,"mat-grid-tile",13),t.TgZ(17,"div",14),t.YNc(18,N,1,2,"img",15),t.TgZ(19,"div",16),t.NdJ("click",function(){return t.CHM(l),t.MAs(23).click()}),t.TgZ(20,"button",17),t.NdJ("click",function(){return n.imageUploadError="Featured Image is required"}),t._uU(21,"Choose Image \u2026"),t.qZA(),t.TgZ(22,"input",18,19),t.NdJ("change",function(s){return n.fileChangeEvent(s)}),t.qZA(),t._uU(24),t.qZA(),t.YNc(25,U,2,1,"mat-error",8),t.qZA(),t.qZA(),t.TgZ(26,"mat-grid-tile",20),t.TgZ(27,"div",21),t.TgZ(28,"mat-form-field",6),t.TgZ(29,"mat-label"),t._uU(30,"Category"),t.qZA(),t.TgZ(31,"mat-select",22),t.YNc(32,J,3,3,"mat-option",23),t.ALo(33,"async"),t.qZA(),t.qZA(),t.TgZ(34,"mat-form-field",6),t.TgZ(35,"mat-label"),t._uU(36,"Tags"),t.qZA(),t.TgZ(37,"mat-select",24),t.YNc(38,w,2,2,"mat-option",23),t.ALo(39,"async"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(40,"button",25),t._uU(41," Create Blog "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}2&o&&(t.xp6(6),t.Q6J("formGroup",n.form),t.xp6(5),t.Q6J("ngIf",n.title.hasError("required")),t.xp6(2),t.Q6J("editor",n.editor),t.xp6(1),t.Q6J("editor",n.editor)("placeholder","Blog Content here..."),t.xp6(1),t.Q6J("cols",2),t.xp6(3),t.Q6J("ngIf",n.imageData),t.xp6(4),t.Udp("display","none"),t.xp6(2),t.hij(" ",n.myfilename," \xa0 "),t.xp6(1),t.Q6J("ngIf",n.imageUploadError&&n.image.hasError("required")),t.xp6(7),t.Q6J("ngForOf",t.lcZ(33,14,n.categories)),t.xp6(6),t.Q6J("ngForOf",t.lcZ(39,16,n.tagList)),t.xp6(2),t.Q6J("disabled",n.form.invalid))},directives:[r._Y,r.JL,r.sg,d.a8,d.dn,u.KE,A.Nt,r.Fj,r.JJ,r.u,r.Q7,g.O5,u.TO,p.Gs,p.tP,T.Il,T.DX,b.lW,u.hX,C.gD,g.sg,q.ey,_.gM],pipes:[g.Ov],styles:[".NgxEditor__MenuBar{flex-wrap:wrap}  .NgxEditor{border-top-left-radius:0;border-top-right-radius:0;border:none;height:400px!important;overflow-y:auto}.mat-toolbar-single-row[_ngcontent-%COMP%]{height:auto!important;background:transparent}.mat-toolbar-single-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:30%}#fileUpload[_ngcontent-%COMP%]{position:absolute;z-index:9;opacity:0;height:100%;width:100%;left:0px;top:0px;cursor:pointer}.showImage[_ngcontent-%COMP%]{text-decoration:none;position:relative}.showImage[_ngcontent-%COMP%]   div.tooltip[_ngcontent-%COMP%]{display:none;border-radius:6px;color:#000;background:white}.showImage[_ngcontent-%COMP%]   div.tooltip[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{float:left;margin:0 8px 8px 0}.showImage[_ngcontent-%COMP%]:hover   .tooltip[_ngcontent-%COMP%]{display:block;position:absolute;top:.5rem;left:min(4vw,-14rem);z-index:1000;width:auto;max-width:25rem;max-height:25rem;border:1px solid black;margin-top:12px;margin-left:32px;overflow:auto;padding:8px}.showImage[_ngcontent-%COMP%]   .tooltip[_ngcontent-%COMP%]:hover{display:block}.medium[_ngcontent-%COMP%]{font-size:medium!important}"]}),e})();var B=i(4516);let M=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-dashboard"]],decls:7,vars:1,consts:[["id","blogs"],[1,"box","bg-accent","full-box","admin-layout"],[1,"d-flex","jcb","admin-layout-header"],[1,"accent","admin-layout-title"],[1,"content","admin-layout-body"],[3,"location"]],template:function(o,n){1&o&&(t.TgZ(0,"section",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h2",3),t._uU(4,"My Blogs"),t.qZA(),t.qZA(),t.TgZ(5,"div",4),t._UZ(6,"app-blog",5),t.qZA(),t.qZA(),t.qZA()),2&o&&(t.xp6(6),t.Q6J("location","dashboard"))},directives:[B.O],styles:[""]}),e})();var D=i(5245),E=i(4533);function O(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," userName is required "),t.qZA())}function Q(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Name is required "),t.qZA())}function k(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Email is required "),t.qZA())}function F(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Not a valid email "),t.qZA())}function Y(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Role is required "),t.qZA())}function S(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Bio is required "),t.qZA())}function j(e,a){if(1&e&&(t.TgZ(0,"button",16),t._uU(1," Edit Profile "),t.qZA()),2&e){const o=t.oxw();t.Q6J("disabled",o.form.invalid)}}const L=[{path:"",children:[{path:"",data:{title:"Dashboard"},component:M},{path:"create",data:{title:"Create Blog"},component:P},{path:"profile",data:{title:"Profile"},component:(()=>{class e{constructor(o){this._auth=o,this.editEnabled=!1,this.form=new r.cw({userName:new r.NI("",[r.kI.required,r.kI.minLength(3)]),name:new r.NI("",[r.kI.required]),email:new r.NI("",[r.kI.required,r.kI.email]),role:new r.NI("",[r.kI.required]),bio:new r.NI("",[r.kI.required]),active:new r.NI("",[r.kI.required]),photo:new r.NI("",[r.kI.required])})}ngOnInit(){this.profileData=this._auth.currentUserValue.data.user,console.log(this.profileData),this.form.setValue({userName:this.profileData.username,name:this.profileData.name,email:this.profileData.email,role:this.profileData.role,bio:this.profileData.bio,active:this.profileData.active,photo:this.profileData.photo}),this.form.disable()}enableEdit(){this.form.controls.name.enable(),this.form.controls.bio.enable(),this.editEnabled=!0}get userName(){return this.form.controls.userName}get name(){return this.form.controls.name}get email(){return this.form.controls.email}get role(){return this.form.controls.role}get bio(){return this.form.controls.bio}get active(){return this.form.controls.active}get photo(){return this.form.controls.photo}uploadImage(){}onSubmit(){console.log(this.form.value)}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(Z.e))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-profile"]],decls:32,vars:10,consts:[["id","blogs",1,"wrapper"],[1,"box","bg-accent","full-box","admin-layout"],[1,"d-flex","jcb","mb-2"],[1,"accent","admin-layout-title"],["type","button","mat-mini-fab","",3,"click"],[1,"content","admin-layout-body"],[1,"form",3,"formGroup","ngSubmit"],["mat-card-avatar","",1,"avatar-img",3,"src","alt","click"],[1,"full-width"],["matInput","","type","text","name","userName","formControlName","userName","placeholder","User Name","required","true"],[4,"ngIf"],["matInput","","type","text","name","name","formControlName","name","placeholder","Name","required","true"],["matInput","","type","text","name","email","formControlName","email","placeholder","Email","required","true"],["matInput","","type","text","name","role","formControlName","role","placeholder","Role","required","true"],["matInput","","cdkTextareaAutosize","","name","bio","formControlName","bio","placeholder","Bio","required","true"],["type","submit","mat-raised-button","","color","primary","class","btn-sm my-1",3,"disabled",4,"ngIf"],["type","submit","mat-raised-button","","color","primary",1,"btn-sm","my-1",3,"disabled"]],template:function(o,n){1&o&&(t.TgZ(0,"section",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h2",3),t._uU(4,"My Profile"),t.qZA(),t.TgZ(5,"button",4),t.NdJ("click",function(){return n.enableEdit()}),t.TgZ(6,"mat-icon"),t._uU(7,"create"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(8,"div",5),t.TgZ(9,"form",6),t.NdJ("ngSubmit",function(){return n.onSubmit()}),t.TgZ(10,"mat-card"),t.TgZ(11,"mat-card-header"),t.TgZ(12,"mat-card-title"),t.TgZ(13,"img",7),t.NdJ("click",function(){return n.uploadImage()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(14,"mat-card-content"),t.TgZ(15,"mat-form-field",8),t._UZ(16,"input",9),t.YNc(17,O,2,0,"mat-error",10),t.qZA(),t.TgZ(18,"mat-form-field",8),t._UZ(19,"input",11),t.YNc(20,Q,2,0,"mat-error",10),t.qZA(),t.TgZ(21,"mat-form-field",8),t._UZ(22,"input",12),t.YNc(23,k,2,0,"mat-error",10),t.YNc(24,F,2,0,"mat-error",10),t.qZA(),t.TgZ(25,"mat-form-field",8),t._UZ(26,"input",13),t.YNc(27,Y,2,0,"mat-error",10),t.qZA(),t.TgZ(28,"mat-form-field",8),t._UZ(29,"textarea",14),t.YNc(30,S,2,0,"mat-error",10),t.qZA(),t.YNc(31,j,2,1,"button",15),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&o&&(t.xp6(9),t.Q6J("formGroup",n.form),t.xp6(4),t.s9C("alt",n.profileData.name),t.Q6J("src",n.profileData.photo,t.LSH),t.xp6(4),t.Q6J("ngIf",n.userName.hasError("required")),t.xp6(3),t.Q6J("ngIf",n.name.hasError("required")),t.xp6(3),t.Q6J("ngIf",n.email.hasError("required")),t.xp6(1),t.Q6J("ngIf",n.email.hasError("email")),t.xp6(3),t.Q6J("ngIf",n.role.hasError("required")),t.xp6(3),t.Q6J("ngIf",n.bio.hasError("required")),t.xp6(1),t.Q6J("ngIf",n.editEnabled))},directives:[b.lW,D.Hw,r._Y,r.JL,r.sg,d.a8,d.dk,d.n5,d.kc,d.dn,u.KE,A.Nt,r.Fj,r.JJ,r.u,r.Q7,g.O5,u.TO,E.IC],styles:[""]}),e})()}]}];let z=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[c.Bz.forChild(L)],c.Bz]}),e})();var R=i(2486);let G=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[g.ez,z,R.m,p.FP]]}),e})()}}]);